
@{
    ViewData["Title"] = "Account";
}
<link href="~/lib/datatables/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<div class="container">
    <div class="row">
    <div class="dropdown">
  <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Variance
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a onclick="refresh('Daily')" class="dropdown-item">Daily</a>
    <a class="dropdown-item" href="#">Weekly</a>
    <a class="dropdown-item" href="#">Monthly</a>
  </div>
</div>
    </div>
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="customerDatatable" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>name</th>
                    <th>date</th>
                    <th>sum</th>
                    @*<th>Actions</th>*@
                </tr>
            </thead>
        </table>
    </div>
</div>
@section Scripts
{
    <script src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
    <script src="~/lib/datatables/js/dataTables.bootstrap4.min.js"></script>

<script>
         function refresh(data){
           console.log(data);
           myTable()
        }


        function myTable() {
            
    $("#customerDatatable").DataTable({
        "processing": true,
        "serverSide": true,
        "filter": true,
        "ajax": {
            "url": "/api/AccountsAPI",
            "type": "POST",
            "datatype": "json",
              dataFilter: function(reps) {
                console.log(reps);
                return reps;
            },
            error:function(err){
                  console.log(err);
            }
        },
        "columnDefs": [{
            "targets": [0],
            "visible": true,
            "searchable": true
        }],
        "columns": [
            { "data": "name", "name": "Name", "autoWidth": true },
            { "data": "month", "name": "Date", "autoWidth": true },
            { "data": "amount", "name": "Sum", "autoWidth": true },
            //{
            //    "render": function (data,row) { return "<a href='#' class='btn btn-danger' onclick=DeleteCustomer('" + row.id+ "'); >Delete</a>";   }
            //},
        ]
    });


        }

</script>



<script>

  


$(document).ready(
    myTable()
    );  

</script>

}